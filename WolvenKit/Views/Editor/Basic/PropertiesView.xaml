<reactiveUi:ReactiveUserControl
    x:TypeArguments="editor:PropertiesViewModel"
    x:Class="WolvenKit.Views.Editor.PropertiesView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ab3d="clr-namespace:Ab3d.Controls;assembly=Ab3d.PowerToys"
    xmlns:cameras="clr-namespace:Ab3d.Cameras;assembly=Ab3d.PowerToys"
    xmlns:reactiveUi="http://reactiveui.net"
    xmlns:conv="clr-namespace:WolvenKit.Functionality.Converters;assembly=WolvenKit.App"
    xmlns:converters="clr-namespace:WolvenKit.Functionality.Converters;assembly=WolvenKit.App"
    xmlns:converters2="clr-namespace:WolvenKit.Functionality.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:dxControls="clr-namespace:Ab3d.DirectX.Controls;assembly=Ab3d.DXEngine.Wpf"
    xmlns:editor="clr-namespace:WolvenKit.ViewModels.Editor;assembly=WolvenKit.App"
    xmlns:ei="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:hc="https://handyorg.github.io/handycontrol"
    xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:model="clr-namespace:WolvenKit.Models;assembly=WolvenKit.App"
    xmlns:svl1="clr-namespace:WPFSoundVisualizationLib;assembly=WPFSoundVisualizationLibNet5"
    xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
    xmlns:visuals="clr-namespace:Ab3d.Visuals;assembly=Ab3d.PowerToys"
    d:DataContext="{d:DesignInstance Type=editor:PropertiesViewModel}"
    d:DesignHeight="450"
    d:DesignWidth="800"
    FontSize="10"
    mc:Ignorable="d">

    

    <Grid>

        <Grid.Resources>
            <ResourceDictionary>
                <ResourceDictionary.MergedDictionaries>
                    <hc:ThemeResources RequestedTheme="Dark" />
                    <hc:Theme />
                </ResourceDictionary.MergedDictionaries>
                <converters2:ValueConverterGroup x:Key="DateTimeVisi">
                    <hc:Object2StringConverter />
                    <hc:String2VisibilityConverter />
                </converters2:ValueConverterGroup>

                <conv:StringPathToItemStringConverter x:Key="PathConverter" />

                <!--  Region: WaveformTimeline  -->
                <LinearGradientBrush x:Key="WaveformRightLevelBrush" StartPoint="1,0" EndPoint="1,1">
                    <GradientStop Offset="0" Color="{DynamicResource MahApps.Colors.AccentBase}" />
                    <GradientStop Offset="1" Color="Black" />
                </LinearGradientBrush>
                <LinearGradientBrush x:Key="WaveformLeftLevelBrush" StartPoint="1,1" EndPoint="1,0">
                    <GradientStop Offset="0" Color="{DynamicResource MahApps.Colors.Accent4}" />
                    <GradientStop Offset="1" Color="White" />
                </LinearGradientBrush>
                <Style TargetType="{x:Type svl1:WaveformTimeline}">
                    <Setter Property="RepeatRegionBrush" Value="{DynamicResource MahApps.Brushes.Gray.SemiTransparent}" />
                    <Setter Property="TimelineTickBrush" Value="{DynamicResource MahApps.Brushes.SemiTransparent}" />
                    <Setter Property="ProgressBarBrush" Value="{DynamicResource MahApps.Brushes.SemiTransparent}" />
                    <Setter Property="CenterLineBrush" Value="{DynamicResource MahApps.Brushes.SemiTransparent}" />
                    <Setter Property="RightLevelBrush" Value="{DynamicResource MahApps.Brushes.Accent3}" />
                    <Setter Property="LeftLevelBrush" Value="{DynamicResource MahApps.Brushes.AccentBase}" />
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type svl1:WaveformTimeline}">
                                <Border
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="20" />
                                            <RowDefinition Height="*" />
                                        </Grid.RowDefinitions>
                                        <Canvas
                                        Name="PART_Waveform"
                                        Grid.Row="1"
                                        ClipToBounds="True" />
                                        <Border
                                        Grid.Row="0"
                                        Panel.ZIndex="0"
                                        BorderBrush="{TemplateBinding TimelineTickBrush}"
                                        BorderThickness="0,0,0,1">
                                            <Canvas
                                            Name="PART_Timeline"
                                            Height="20"
                                            ClipToBounds="True" />
                                        </Border>
                                        <Canvas
                                        Name="PART_Repeat"
                                        Grid.Row="1"
                                        ClipToBounds="True" />
                                        <Canvas
                                        Name="PART_Progress"
                                        Grid.Row="0"
                                        Grid.RowSpan="2"
                                        ClipToBounds="True" />
                                    </Grid>
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
                <!--  EndRegion: WaveformTimeline  -->

                <Style TargetType="{x:Type svl1:SpectrumAnalyzer}">
                    <Setter Property="BarStyle">
                        <Setter.Value>
                            <Style TargetType="{x:Type Rectangle}">
                                <Setter Property="Fill">
                                    <Setter.Value>
                                        <LinearGradientBrush>
                                            <GradientStop Offset="0" Color="{DynamicResource MahApps.Colors.AccentBase}" />
                                            <GradientStop Offset="1" Color="{DynamicResource MahApps.Colors.Gray.SemiTransparent}" />
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Setter.Value>
                    </Setter>
                    <Setter Property="PeakStyle">
                        <Setter.Value>
                            <Style TargetType="{x:Type Rectangle}">
                                <Setter Property="Fill">
                                    <Setter.Value>
                                        <LinearGradientBrush>
                                            <GradientStop Offset="0" Color="{DynamicResource MahApps.Colors.AccentBase}" />
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>

                                <Setter Property="Effect">
                                    <Setter.Value>
                                        <hc:BrightnessEffect Brightness="3" />
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Setter.Value>
                    </Setter>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type svl1:SpectrumAnalyzer}">
                                <Border
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                                    <Canvas
                                    Name="PART_SpectrumCanvas"
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Stretch"
                                    ClipToBounds="True" />
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>

                <!--  region PreviewSlider  -->

                <Style x:Key="PreviewSliderRepeatButtonHorizontalStyle" TargetType="RepeatButton">
                    <Setter Property="OverridesDefaultStyle" Value="true" />
                    <Setter Property="Background" Value="Transparent" />
                    <Setter Property="Focusable" Value="false" />
                    <Setter Property="IsTabStop" Value="false" />
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="RepeatButton">
                                <Border
                                Width="{TemplateBinding Width}"
                                Height="{TemplateBinding Height}"
                                Background="Transparent">
                                    <Rectangle Height="2" Fill="{TemplateBinding Background}" />
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>

                <Style x:Key="PreviewSliderRepeatButtonVerticalStyle" TargetType="RepeatButton">
                    <Setter Property="OverridesDefaultStyle" Value="true" />
                    <Setter Property="Background" Value="Transparent" />
                    <Setter Property="Focusable" Value="false" />
                    <Setter Property="IsTabStop" Value="false" />
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="RepeatButton">
                                <Border
                                Width="{TemplateBinding Width}"
                                Height="{TemplateBinding Height}"
                                Background="Transparent">
                                    <Rectangle Width="2" Fill="{TemplateBinding Background}" />
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>

                <ControlTemplate x:Key="PreviewSliderThumb" TargetType="Thumb">
                    <Border
                    Name="BorderDot"
                    Width="18"
                    Height="18"
                    Background="{DynamicResource MahApps.HamburgerMenu.Pane.Background}"
                    BorderBrush="{DynamicResource PrimaryBrush}"
                    BorderThickness="0"
                    CornerRadius="9"
                    Effect="{StaticResource EffectShadow1}" />
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Effect" Value="{StaticResource EffectShadow2}" />
                        </Trigger>
                        <EventTrigger RoutedEvent="PreviewMouseLeftButtonDown">
                            <EventTrigger.Actions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <ThicknessAnimation
                                        Storyboard.TargetName="BorderDot"
                                        Storyboard.TargetProperty="BorderThickness"
                                        To="2"
                                        Duration="0:0:.1" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger.Actions>
                        </EventTrigger>
                        <EventTrigger RoutedEvent="PreviewMouseLeftButtonUp">
                            <EventTrigger.Actions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <ThicknessAnimation
                                        Storyboard.TargetName="BorderDot"
                                        Storyboard.TargetProperty="BorderThickness"
                                        To="1"
                                        Duration="0:0:.1" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger.Actions>
                        </EventTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>

                <ControlTemplate x:Key="PreviewSliderHorizontal" TargetType="hc:PreviewSlider">
                    <hc:SimplePanel>
                        <Border
                        x:Name="TrackBackground"
                        Height="2"
                        Margin="9,0"
                        VerticalAlignment="center"
                        Background="{TemplateBinding Background}" />
                        <Track x:Name="PART_Track" Margin="9,0">
                            <Track.DecreaseRepeatButton>
                                <RepeatButton
                                Background="{DynamicResource PrimaryBrush}"
                                Command="{x:Static Slider.DecreaseLarge}"
                                Style="{StaticResource PreviewSliderRepeatButtonHorizontalStyle}" />
                            </Track.DecreaseRepeatButton>
                            <Track.IncreaseRepeatButton>
                                <RepeatButton Command="{x:Static Slider.IncreaseLarge}" Style="{StaticResource PreviewSliderRepeatButtonHorizontalStyle}" />
                            </Track.IncreaseRepeatButton>
                            <Track.Thumb>
                                <Thumb
                                x:Name="PART_Thumb"
                                Width="18"
                                Height="18"
                                Margin="-9,0"
                                VerticalAlignment="Center"
                                Focusable="False"
                                OverridesDefaultStyle="True"
                                Template="{StaticResource PreviewSliderThumb}" />
                            </Track.Thumb>
                        </Track>
                    </hc:SimplePanel>
                </ControlTemplate>

                <ControlTemplate x:Key="PreviewSliderVertical" TargetType="hc:PreviewSlider">
                    <hc:SimplePanel>
                        <Border
                        x:Name="TrackBackground"
                        Width="2"
                        Margin="0,9"
                        HorizontalAlignment="center"
                        Background="{TemplateBinding Background}" />
                        <Track x:Name="PART_Track" Margin="0,9">
                            <Track.DecreaseRepeatButton>
                                <RepeatButton
                                Background="{DynamicResource PrimaryBrush}"
                                Command="{x:Static Slider.DecreaseLarge}"
                                Style="{StaticResource PreviewSliderRepeatButtonVerticalStyle}" />
                            </Track.DecreaseRepeatButton>
                            <Track.IncreaseRepeatButton>
                                <RepeatButton Command="{x:Static Slider.IncreaseLarge}" Style="{StaticResource PreviewSliderRepeatButtonVerticalStyle}" />
                            </Track.IncreaseRepeatButton>
                            <Track.Thumb>
                                <Thumb
                                x:Name="PART_Thumb"
                                Width="18"
                                Height="18"
                                Margin="0,-9"
                                HorizontalAlignment="Center"
                                Focusable="False"
                                OverridesDefaultStyle="True"
                                Template="{StaticResource PreviewSliderThumb}" />
                            </Track.Thumb>
                        </Track>
                    </hc:SimplePanel>
                </ControlTemplate>

                <Style x:Key="PreviewSliderBaseStyle" TargetType="hc:PreviewSlider">
                    <Setter Property="Stylus.IsPressAndHoldEnabled" Value="false" />
                    <Setter Property="IsMoveToPointEnabled" Value="True" />
                    <Setter Property="Background" Value="{DynamicResource SecondaryRegionBrush}" />
                    <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}" />
                    <Setter Property="Template" Value="{StaticResource PreviewSliderHorizontal}" />
                    <Style.Triggers>
                        <Trigger Property="Orientation" Value="Vertical">
                            <Setter Property="Template" Value="{StaticResource PreviewSliderVertical}" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Opacity" Value=".4" />
                        </Trigger>
                    </Style.Triggers>
                </Style>

                <!--  endregion  -->
            </ResourceDictionary>
        </Grid.Resources>

        <syncfusion:TabControlExt>
            <syncfusion:TabItemExt Header="File Properties">

                <Grid>
                    <Grid.Resources>
                        <Style BasedOn="{StaticResource MahApps.Styles.CheckBox.DataGrid.Win10}" TargetType="CheckBox">
                            <Setter Property="HorizontalAlignment" Value="Left" />
                        </Style>

                        <Style TargetType="TextBox">
                            <Setter Property="Margin" Value="5,0,0,0" />
                        </Style>
                    </Grid.Resources>

                    <syncfusion:PropertyGrid
                        x:Name="PEPropGrid"
                        EditableBackground="{DynamicResource MahApps.Brushes.Accent3}"
                        EditableFontWeight="SemiBold"
                        IsEnabled="False"
                        ReadOnlyBackground="{DynamicResource MahApps.Brushes.Accent3}"
                        ReadOnlyFontWeight="SemiBold"
                        SelectedObject="{Binding PE_SelectedItem, Mode=OneWay}"
                        Visibility="{Binding PE_FileInfoVisible, Converter={StaticResource boolToVisibilityConverter}}" />

                    <syncfusion:PropertyGrid
                        x:Name="ABPropGrid"
                        EditableBackground="{DynamicResource MahApps.Brushes.Accent3}"
                        EditableFontWeight="SemiBold"
                        IsEnabled="False"
                        ReadOnlyBackground="{DynamicResource MahApps.Brushes.Accent3}"
                        ReadOnlyFontWeight="SemiBold"
                        SelectedObject="{Binding AB_SelectedItem, Mode=OneWay}"
                        Visibility="{Binding AB_FileInfoVisible, Converter={StaticResource boolToVisibilityConverter}}" />
                </Grid>
            </syncfusion:TabItemExt>
            <syncfusion:TabItemExt Header="Mesh Preview" IsSelected="{Binding IsMeshPreviewVisible}" Visibility="{Binding IsMeshPreviewVisible, Converter={StaticResource boolToVisibilityConverter}}">
                <Grid Name="RootGrid" Height="auto">
                    <Border Name="ViewportBorder" Background="Transparent">
                        <dxControls:DXViewportView
                            Name="MainDXViewportView"
                            BackgroundColor="Transparent"
                            PresentationType="DirectXImage">

                            <Viewport3D Name="MainViewport">

                                <ModelVisual3D x:Name="ContentVisual" />
                                <visuals:WireframeVisual3D
                                    x:Name="ContentWireframeVisual"
                                    LineColor="Black"
                                    LineThickness="0.8"
                                    ShowPolygonLines="True"
                                    UseModelColor="False"
                                    WireframeType="WireframeWithOriginalSolidModel" />
                            </Viewport3D>
                        </dxControls:DXViewportView>
                    </Border>
                    <ab3d:ViewCubeCameraController
                        x:Name="ViewCubeCameraController1"
                        Width="100"
                        Height="100"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Bottom"
                        AmbientLightColor="{DynamicResource MahApps.Colors.AccentBase}"
                        Foreground="{DynamicResource MahApps.Brushes.AccentBase}"
                        IsEdgeSelectionEnabled="True"
                        IsRotationCircleShown="True"
                        SelectionBrush="{DynamicResource MahApps.Brushes.Accent3}"
                        TargetCamera="{Binding ElementName=Camera1}" />
                    <TextBlock
                        Grid.Row="1"
                        Grid.Column="1"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Bottom"
                        FontSize="7"
                        Text="Powered by Ab4d" />
                    <cameras:TargetPositionCamera
                        Name="Camera1"
                        Attitude="-20"
                        Bank="0"
                        Distance="200"
                        Heading="230"
                        ShowCameraLight="Always"
                        TargetPosition="0 0 0"
                        TargetViewport3D="{Binding ElementName=MainViewport}" />

                    <ab3d:MouseCameraController
                        Name="MouseCameraController1"
                        EventsSourceElement="{Binding ElementName=ViewportBorder}"
                        MoveCameraConditions="MiddleMouseButtonPressed"
                        MoveOnlyHorizontally="True"
                        QuickZoomConditions="RightMouseButtonPressed"
                        RotateCameraConditions="LeftMouseButtonPressed"
                        TargetCamera="{Binding ElementName=Camera1}"
                        ZoomMode="Viewport3DCenter" />

                    <ab3d:CameraAxisPanel
                        Width="50"
                        Height="50"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Bottom"
                        Is3DAxesShown="True"
                        TargetCamera="{Binding ElementName=Camera1}" />

                    <StackPanel
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Top"
                        Orientation="Vertical">

                        <Expander
                            Header="Assimp info"
                            IsExpanded="False"
                            Style="{StaticResource BaseStyle}"
                            Visibility="Collapsed">
                            <TextBlock
                                Name="FileFormatsTextBlock"
                                Margin="10,5,10,0"
                                Text=""
                                TextWrapping="Wrap" />
                        </Expander>
                    </StackPanel>

                    <syncfusion:DropDownButton
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Label="Options">
                        <syncfusion:DropDownButton.IconTemplate>
                            <DataTemplate>
                                <iconPacks:PackIconRemixIcon
                                    Width="12"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Kind="Settings2Fill" />
                            </DataTemplate>
                        </syncfusion:DropDownButton.IconTemplate>
                        <Border
                            Margin="5"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom"
                            Background="Black"
                            BorderBrush="Black"
                            BorderThickness="2"
                            Visibility="Visible">
                            <StackPanel Margin="10,5" Orientation="Vertical">

                                <Button
                                    Name="LoadButton"
                                    Height="26"
                                    Margin="0,10,0,0"
                                    HorizontalAlignment="Left"
                                    Click="LoadButton_OnClick"
                                    Content="Load file"
                                    IsDefault="True"
                                    Visibility="Collapsed" />

                                <TextBlock
                                    Margin="0,10,0,0"
                                    VerticalAlignment="Center"
                                    FontWeight="Bold"
                                    Text="(or drag and drop 3D model file)"
                                    Visibility="Collapsed" />

                                <CheckBox
                                    Name="ShowWireframeCheckBox"
                                    Margin="0,10,0,0"
                                    HorizontalAlignment="Left"
                                    Checked="OnShowWireframeCheckBoxCheckedChanged"
                                    Content="Show wireframe"
                                    IsChecked="True"
                                    Style="{DynamicResource MahApps.Styles.CheckBox.DataGrid.Win10}"
                                    Unchecked="OnShowWireframeCheckBoxCheckedChanged" />
                                <CheckBox
                                    Name="AddLineDepthBiasCheckBox"
                                    Margin="0,4,0,0"
                                    HorizontalAlignment="Left"
                                    Checked="OnAddLineDepthBiasCheckBoxCheckedChanged"
                                    Content="Add line depth bias (DXEngine only)"
                                    IsChecked="True"
                                    IsEnabled="{Binding ElementName=ShowWireframeCheckBox, Path=IsChecked}"
                                    Style="{DynamicResource MahApps.Styles.CheckBox.DataGrid.Win10}"
                                    Unchecked="OnAddLineDepthBiasCheckBoxCheckedChanged" />
                                <CheckBox
                                    Name="ReadPolygonIndicesCheckBox"
                                    Margin="0,4,0,0"
                                    HorizontalAlignment="Left"
                                    Checked="OnReadPolygonIndicesCheckBoxCheckedChanged"
                                    Content="Read PolygonIndices"
                                    IsChecked="True"
                                    Style="{DynamicResource MahApps.Styles.CheckBox.DataGrid.Win10}"
                                    ToolTip="When checked ReaderObj will read PolygonIndices collection that can be used to show polygons instead of triangles. Object need to be shown with wireframe to see the difference."
                                    Unchecked="OnReadPolygonIndicesCheckBoxCheckedChanged" />

                                <Button
                                    Name="ShowInfoButton"
                                    Margin="0,20,0,0"
                                    Click="ShowInfoButton_OnClick"
                                    Content="Show objects info"
                                    IsEnabled="False" />
                            </StackPanel>
                        </Border>
                    </syncfusion:DropDownButton>
                </Grid>
            </syncfusion:TabItemExt>

            <syncfusion:TabItemExt IsSelected="{Binding IsAudioPreviewVisible}" Header="Audio Preview" Visibility="{Binding IsAudioPreviewVisible, Converter={StaticResource boolToVisibilityConverter}}">

                <Border
                    Width="auto"
                    Height="auto"
                    hc:ThemeManager.RequestedAccentColor="{DynamicResource MahApps.Brushes.Accent3}"
                    BorderBrush="{DynamicResource MahApps.Brushes.Accent4}"
                    BorderThickness="1">

                    <Grid Background="{DynamicResource RegionBrush}">

                        <Grid Margin="0,0,0,0">

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="1*" />
                            </Grid.ColumnDefinitions>

                            <Grid
                                Grid.Column="1"
                                Margin="0"
                                Background="{DynamicResource RegionBrush}">

                                <Grid
                                    Margin="5"
                                    VerticalAlignment="Stretch"
                                    Background="{DynamicResource Fluent.Ribbon.Brushes.Backstage.Background}">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="50" />
                                        <RowDefinition Height="auto" />
                                        <RowDefinition Height="2*" />
                                        <RowDefinition Height="50" />
                                    </Grid.RowDefinitions>

                                    <Border
                                        Grid.Row="3"
                                        Width="auto"
                                        Margin="10,0,10,10"
                                        HorizontalAlignment="Stretch"
                                        VerticalAlignment="Stretch"
                                        Background="{DynamicResource RegionBrush}"
                                        CornerRadius="5">
                                        <Grid HorizontalAlignment="Center">

                                            <StackPanel
                                                Margin="5,0,0,0"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center"
                                                Orientation="Horizontal">
                                                <Button
                                                    x:Name="PlayButton"
                                                    Width="35"
                                                    Height="25"
                                                    Margin="0"
                                                    hc:IconElement.Geometry="{DynamicResource AudioPlay}"
                                                    Background="Transparent"
                                                    BorderBrush="Transparent"
                                                    Command="{Binding PlayAudioCommand}"
                                                    Effect="{StaticResource MahApps.DropShadowEffect.Menu}"
                                                    Style="{StaticResource ButtonIcon}" />
                                                <hc:Divider
                                                    Height="10"
                                                    LineStroke="{DynamicResource MahApps.Brushes.Accent3}"
                                                    Orientation="Vertical" />
                                                <Button
                                                    x:Name="PauseButton"
                                                    Width="35"
                                                    Height="25"
                                                    Margin="0"
                                                    hc:IconElement.Geometry="{DynamicResource AudioPause}"
                                                    Background="Transparent"
                                                    BorderBrush="Transparent"
                                                    Command="{Binding PauseAudioCommand}"
                                                    Effect="{StaticResource MahApps.DropShadowEffect.Menu}"
                                                    IsEnabled="True"
                                                    Style="{StaticResource ButtonIcon}" />
                                                <hc:Divider
                                                    Height="10"
                                                    LineStroke="{DynamicResource MahApps.Brushes.Accent3}"
                                                    Orientation="Vertical" />
                                                <Button
                                                    x:Name="StopButton"
                                                    Width="35"
                                                    Height="25"
                                                    Margin="0"
                                                    hc:IconElement.Geometry="{DynamicResource AudioStop}"
                                                    Background="Transparent"
                                                    BorderBrush="Transparent"
                                                    Command="{Binding StopAudioCommand}"
                                                    Effect="{StaticResource MahApps.DropShadowEffect.Menu}"
                                                    Style="{StaticResource ButtonIcon}" />
                                                <hc:Divider
                                                    Height="10"
                                                    LineStroke="{DynamicResource MahApps.Brushes.Accent3}"
                                                    Orientation="Vertical" />

                                                <Border
                                                    Margin="5"
                                                    BorderBrush="{DynamicResource MahApps.Brushes.Accent3}"
                                                    BorderThickness="1"
                                                    CornerRadius="5"
                                                    Effect="{StaticResource MahApps.DropShadowEffect.Menu}">
                                                    <StackPanel Orientation="Horizontal">
                                                        <svl1:DigitalClock
                                                            x:Name="clockDisplay"
                                                            Grid.Row="1"
                                                            Grid.ColumnSpan="2"
                                                            Margin="5"
                                                            HorizontalAlignment="Right"
                                                            Effect="{StaticResource MahApps.DropShadowEffect.Menu}"
                                                            ShowHours="True"
                                                            ShowSubSeconds="True"
                                                            Time="{Binding ChannelPosition}" />
                                                    </StackPanel>
                                                </Border>
                                            </StackPanel>
                                        </Grid>
                                    </Border>

                                    <Border
                                        Grid.Row="2"
                                        Height="auto"
                                        Margin="10,10,10,10"
                                        VerticalAlignment="Stretch"
                                        Background="{DynamicResource RegionBrush}"
                                        CornerRadius="5">
                                        <Grid>
                                            <svl1:WaveformTimeline
                                                x:Name="waveformTimeline"
                                                Margin="5"
                                                BorderThickness="1" />
                                        </Grid>
                                    </Border>

                                    <Border
                                        Grid.Row="1"
                                        Height="auto"
                                        Margin="10,10,10,10"
                                        VerticalAlignment="Stretch"
                                        Background="{DynamicResource RegionBrush}"
                                        CornerRadius="5"
                                        Visibility="Collapsed">
                                        <Grid>
                                            <svl1:SpectrumAnalyzer
                                                x:Name="spectrumAnalyzer"
                                                Height="auto"
                                                Margin="0"
                                                VerticalAlignment="Stretch"
                                                BarCount="40" />
                                        </Grid>
                                    </Border>

                                    <Border
                                        Grid.Row="0"
                                        Height="100"
                                        MaxHeight="50"
                                        Margin="10,10,10,0"
                                        VerticalAlignment="Center"
                                        Background="{DynamicResource RegionBrush}"
                                        BorderThickness="1"
                                        CornerRadius="10">

                                        <Grid>

                                            <hc:RunningBlock
                                                x:Name="RunnerText"
                                                AutoReverse="True"
                                                BorderBrush="Transparent"
                                                Content="{Binding CurrentTrackName}"
                                                Runaway="False"
                                                Duration="00:00:30" />
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Grid>
                        </Grid>
                    </Grid>
                </Border>
            </syncfusion:TabItemExt>

            <syncfusion:TabItemExt IsSelected="{Binding IsImagePreviewVisible}" Header="Image Preview" Visibility="{Binding IsImagePreviewVisible, Converter={StaticResource boolToVisibilityConverter}}">
                <!--<hc:ImageViewer
                    x:Name="bold"
                    Width="auto"
                    Background="{DynamicResource SecondaryRegionBrush}" />-->

                <syncfusion:SfImageEditor x:Name="bold" />
            </syncfusion:TabItemExt>

            <syncfusion:TabItemExt IsSelected="{Binding IsVideoPreviewVisible}"
                x:Name="testme"
                Header="Video Preview"
                Visibility="{Binding IsVideoPreviewVisible, Converter={StaticResource boolToVisibilityConverter}}" />
        </syncfusion:TabControlExt>
    </Grid>
</reactiveUi:ReactiveUserControl>
