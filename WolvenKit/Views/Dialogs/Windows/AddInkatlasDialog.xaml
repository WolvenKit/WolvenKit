<Window
    x:Class="WolvenKit.Views.Dialogs.Windows.AddInkatlasDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:hc="https://handyorg.github.io/handycontrol"
    xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
    xmlns:helpers="clr-namespace:WolvenKit.Functionality.Helpers"
    xmlns:editors="clr-namespace:WolvenKit.Views.Editors"
    xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
    xmlns:templates="clr-namespace:WolvenKit.Views.Templates"
    Title="Generate new inkatlas"
    Width="{StaticResource WolvenKitDialogWidth}"
    MinWidth="{StaticResource WolvenKitDialogWidthSmall}"
    MinHeight="{StaticResource WolvenKitDialogHeightSmall}"
    Padding="{DynamicResource WolvenKitMarginTop}"
    Background="{StaticResource BackgroundColor_Control}"
    SizeToContent="WidthAndHeight"
    FocusManager.FocusedElement="{Binding ElementName=FilterableDropdownMenu}"
    DataContext="{Binding RelativeSource={RelativeSource Self},
                          Path=ViewModel}"
    WindowStartupLocation="CenterScreen">

    <Grid
        HorizontalAlignment="Stretch"
        VerticalAlignment="Stretch">
        <Grid.Resources>
            <ResourceDictionary>
                <ResourceDictionary.MergedDictionaries>
                    <hc:ThemeResources />
                    <hc:Theme />
                </ResourceDictionary.MergedDictionaries>
                <Style
                    BasedOn="{StaticResource WolvenkitLabelStyle}"
                    TargetType="{x:Type Label}" />
            </ResourceDictionary>
        </Grid.Resources>

        <syncfusion:WizardControl
            CancelButtonCancelsWindow="True"
            FinishButtonClosesWindow="True"
            Finish="WizardControl_OnFinish">
            <syncfusion:WizardPage
                Height="Auto"
                Margin="{DynamicResource WolvenKitMarginHorizontal}"
                Background="{StaticResource BackgroundColor_Control}"
                BackVisibility="Collapsed"
                CancelVisibility="Visible"
                FinishVisibility="Visible"
                HelpVisibility="Collapsed"
                NextVisibility="Collapsed"
                PreviewKeyDown="WizardPage_PreviewKeyDown"
                PageType="Exterior">
                <Grid
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="{StaticResource WolvenKitDialogLabelColumnWidthMedium}" />
                        <ColumnDefinition Width="60" />
                        <ColumnDefinition Width="20" />
                        <ColumnDefinition Width="60" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="{DynamicResource WolvenKitButtonGridWidth}" />
                    </Grid.ColumnDefinitions>

                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="5" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="5" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="10" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="5" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="10" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="10" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="10" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="10" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="0" />
                    </Grid.RowDefinitions>


                    <!-- Existing file (overwrite) -->
                    <editors:FilterableDropdownMenu
                        x:Name="ExistingFileDropdownMenu"
                        Grid.Row="2"
                        Grid.Column="0"
                        Grid.ColumnSpan="6"
                        Label="Overwrite existing file:"
                        Options="{Binding ExistingFiles,
                                          UpdateSourceTrigger=PropertyChanged}"
                        SelectedOption="{Binding ExistingFile,
                                                 Mode=TwoWay}"
                        IsInline="True" />
                    <TextBox
                        x:Name="ExistingFileBox"
                        Grid.Row="4"
                        Grid.Column="1"
                        Grid.ColumnSpan="5"
                        Margin="{StaticResource WolvenKitMarginTinyBottom}"
                        Background="{StaticResource BackgroundBrush_InputField_Readonly}"
                        helpers:TextBoxBehavior.FocusGainedSelectAll="True"
                        IsReadOnly="True" />

                    <!-- relative path (project folder) -->
                    <editors:FilterableDropdownMenu
                        x:Name="FilterableDropdownMenu"
                        Grid.Row="6"
                        Grid.Column="0"
                        Grid.ColumnSpan="6"
                        Label="Inkatlas folder:"
                        Options="{Binding ProjectFolders,
                                          UpdateSourceTrigger=PropertyChanged}"
                        SelectedOption="{Binding RelativePath,
                                                 Mode=TwoWay}"
                        IsInline="True" />

                    <TextBox
                        x:Name="FolderPathBox"
                        Grid.Row="8"
                        Grid.Column="1"
                        Grid.ColumnSpan="5"
                        Margin="{StaticResource WolvenKitMarginTinyBottom}"
                        helpers:TextBoxBehavior.FocusGainedSelectAll="True"
                        KeyboardNavigation.TabIndex="-1" />

                    <Label
                        Grid.Row="10"
                        Grid.Column="0"
                        Width="{StaticResource WolvenKitLabelWidthMedium}"
                        Margin="{StaticResource WolvenKitMarginTinyBottom}"
                        HorizontalAlignment="Left"
                        Content="Inkatlas file name" />
                    <TextBox
                        x:Name="RelativePathBox"
                        Grid.Row="10"
                        Grid.Column="1"
                        Grid.ColumnSpan="5"
                        Margin="{StaticResource WolvenKitMarginTinyBottom}"
                        helpers:TextBoxBehavior.FocusGainedSelectAll="True"
                        KeyboardNavigation.TabIndex="-1" />

                    <TextBox
                        x:Name="InkatlasFileNameBox"
                        Grid.Row="10"
                        Grid.Column="1"
                        Grid.ColumnSpan="5"
                        Margin="{StaticResource WolvenKitMarginTinyBottom}"
                        helpers:TextBoxBehavior.FocusGainedSelectAll="True"
                        KeyboardNavigation.TabIndex="-1">
                        <TextBox.ToolTip>
                            <ToolTip />
                        </TextBox.ToolTip>
                    </TextBox>

                    <!-- Tile size -->
                    <Label
                        Grid.Row="12"
                        Grid.Column="0"
                        Width="{StaticResource WolvenKitLabelWidthMedium}"
                        Margin="{StaticResource WolvenKitMarginTinyBottom}"
                        HorizontalAlignment="Left"
                        Content="Tile size:" />

                    <TextBox
                        x:Name="TileWidthBox"
                        Grid.Row="12"
                        Grid.Column="1"
                        helpers:TextBoxBehavior.FocusGainedSelectAll="True"
                        KeyboardNavigation.TabIndex="-1">
                        <TextBox.ToolTip>
                            <ToolTip>
                                Leave at 0 to disable
                            </ToolTip>
                        </TextBox.ToolTip>
                    </TextBox>

                    <Label
                        Grid.Row="12"
                        Grid.Column="2"
                        Width="15"
                        Margin="{DynamicResource WolvenKitMarginTinyTop}"
                        HorizontalAlignment="Center"
                        Foreground="White"
                        Content="x" />

                    <TextBox
                        x:Name="TileHeightBox"
                        Grid.Row="12"
                        Grid.Column="3"
                        helpers:TextBoxBehavior.FocusGainedSelectAll="True"
                        KeyboardNavigation.TabIndex="-1">
                        <TextBox.ToolTip>
                            <ToolTip>
                                Leave at 0 to disable
                            </ToolTip>
                        </TextBox.ToolTip>
                    </TextBox>

                    <ComboBox
                        x:Name="IconSizeDropdown"
                        Grid.Row="12"
                        Grid.Column="4"
                        Grid.ColumnSpan="2"
                        Margin="{DynamicResource WolvenKitMarginLeft}"
                        ItemsSource="{Binding IconFileSizes,
                                              UpdateSourceTrigger=PropertyChanged}"
                        SelectionChanged="OnIconSizeSelected"
                        KeyboardNavigation.TabIndex="-1" />


                    <!-- Remember values? -->
                    <Label
                        Grid.Row="14"
                        Grid.Column="0"
                        Width="{StaticResource WolvenKitLabelWidthMedium}"
                        HorizontalAlignment="Left"
                        Content="PNG raw folder" />

                    <TextBox
                        x:Name="PngFolderBox"
                        Grid.Row="14"
                        Grid.Column="1"
                        Grid.ColumnSpan="4"
                        Margin="{StaticResource WolvenKitMarginTinyRight}"
                        helpers:TextBoxBehavior.FocusGainedSelectAll="True"
                        KeyboardNavigation.TabIndex="-1">
                        <TextBox.ToolTip>
                            <ToolTip>
                                Folder with your icon PNGs
                            </ToolTip>
                        </TextBox.ToolTip>
                    </TextBox>

                    <Button
                        Grid.Row="14"
                        Grid.Column="5"
                        Padding="0"
                        syncfusion:FocusManagerHelper.FocusedElement="True"
                        KeyboardNavigation.TabIndex="-1"
                        Click="FileButton_Click">
                        <templates:IconBox
                            IconPack="Material"
                            Kind="Folder"
                            Size="{DynamicResource WolvenKitIconMicro}" />
                    </Button>


                    <!-- Remember values? -->
                    <Label
                        Grid.Row="16"
                        Grid.Column="0"
                        Width="{StaticResource WolvenKitLabelWidthMedium}"
                        Margin="{DynamicResource WolvenKitMarginTinyVertical}"
                        HorizontalAlignment="Left"
                        Content="Remember values?" />

                    <CheckBox
                        x:Name="RememberValuesCheckBox"
                        Grid.Row="16"
                        Grid.Column="1"
                        Margin="{DynamicResource WolvenKitMarginTinyVertical}"
                        KeyboardNavigation.TabIndex="-1" />
                </Grid>
            </syncfusion:WizardPage>
        </syncfusion:WizardControl>
    </Grid>

</Window>
