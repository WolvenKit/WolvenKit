<Window
    x:Class="WolvenKit.Views.Dialogs.CopyMeshAppearancesDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:hc="https://handyorg.github.io/handycontrol"
    xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
    xmlns:converters="clr-namespace:WolvenKit.Converters"
    xmlns:editors="clr-namespace:WolvenKit.Views.Editors"
    Title="Select .mesh file(s)"
    SizeToContent="WidthAndHeight"
    DataContext="{Binding RelativeSource={RelativeSource Self},
                          Path=ViewModel}"
    FocusManager.FocusedElement="{Binding ElementName=NpcNameTextbox}"
    WindowStartupLocation="CenterScreen"
    Topmost="True">

    <Grid
        Margin="5,5,2,5"
        HorizontalAlignment="Stretch"
        VerticalAlignment="Stretch"
        hc:ThemeManager.RequestedAccentColor="{DynamicResource MahApps.Brushes.Accent3}">

        <Grid.Resources>
            <ResourceDictionary>
                <ResourceDictionary.MergedDictionaries>
                    <hc:ThemeResources />
                    <hc:Theme />
                </ResourceDictionary.MergedDictionaries>
                <Style TargetType="{x:Type Label}">
                    <Setter Property="VerticalAlignment" Value="Center" />
                </Style>
                <converters:EnumDescriptionConverter x:Key="EnumDescriptionConverter" />
            </ResourceDictionary>
        </Grid.Resources>

        <syncfusion:WizardControl
            CancelButtonCancelsWindow="True"
            FinishButtonClosesWindow="True"
            FinishEnabled="{Binding CanSave,
                                    UpdateSourceTrigger=PropertyChanged}">

            <syncfusion:WizardPage
                BackVisibility="Collapsed"
                CancelVisibility="Visible"
                FinishVisibility="Visible"
                HelpVisibility="Collapsed"
                NextVisibility="Collapsed"
                PreviewKeyDown="WizardPage_PreviewKeyDown"
                PageType="Exterior">
                <Grid
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="{DynamicResource WolvenKitDialogLabelColumnWidthMedium}" />
                        <ColumnDefinition Width="3*" MinWidth="{DynamicResource WolvenKitDialogWidthSmall}" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="10" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="10" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="10" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="10" />
                    </Grid.RowDefinitions>

                    <Button
                        x:Name="ClickButton"
                        Grid.Row="0"
                        Grid.Column="1"
                        Width="Auto"
                        Height="{DynamicResource WolvenKitHomeButtonHeight}"
                        Margin="{DynamicResource WolvenKitMarginBottom}"
                        Padding="{DynamicResource WolvenKitMarginTiny}"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Bottom"
                        Background="{StaticResource BackgroundColor_Button_Active}"
                        Foreground="White"
                        Style="{DynamicResource ModernButtonStyle}"
                        Content="From ArchiveXL patch mesh"
                        Click="OnButtonClick" />

                    <!-- ======================================================== -->

                    <TextBlock
                        Grid.Row="2"
                        Grid.Column="0"
                        Margin="{DynamicResource WolvenKitMarginTop}"
                        Padding="{DynamicResource WolvenKitMarginTinyLeft}"
                        VerticalAlignment="Top"
                        Text="Select .mesh file(s)" />

                    <editors:FilterableDropdownMenu
                        x:Name="Dropdown"
                        Grid.Row="2"
                        Grid.Column="0"
                        Grid.ColumnSpan="2"
                        Options="{Binding Options,
                                          UpdateSourceTrigger=PropertyChanged}"
                        IsInline="False"
                        IsShowLabel="False"
                        SelectedOption="{Binding SelectedOption}"
                        KeyboardNavigation.TabIndex="-1" />

                    <TextBlock
                        Grid.Row="4"
                        Grid.Column="0"
                        Margin="{DynamicResource WolvenKitMarginTiny}"
                        VerticalAlignment="Bottom"
                        Text="Append (don't overwrite)" />

                    <CheckBox
                        Grid.Row="4"
                        Grid.Column="1"
                        Margin="{DynamicResource WolvenKitMarginTinyTop}"
                        IsChecked="{Binding IsAppend}"
                        KeyboardNavigation.TabIndex="-1" />

                    <TextBlock
                        Grid.Row="6"
                        Grid.Column="0"
                        Margin="{DynamicResource WolvenKitMarginTiny}"
                        VerticalAlignment="Bottom"
                        Text="... or enter by hand" />

                    <TextBox
                        x:Name="TextBox"
                        Grid.Row="6"
                        Grid.Column="1"
                        Padding="{DynamicResource WolvenKitMarginTiny}"
                        VerticalContentAlignment="Center"
                        FontSize="{DynamicResource WolvenKitFontBody}"
                        Text="{Binding SelectedOption,
                                       Mode=TwoWay}"
                        KeyboardNavigation.TabIndex="-1" />

                </Grid>
            </syncfusion:WizardPage>
        </syncfusion:WizardControl>

    </Grid>
</Window>
