<Window
    x:Class="WolvenKit.Views.Dialogs.SceneInputDialogView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:hc="https://handyorg.github.io/handycontrol"
    xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
    Title="{Binding Title}"
    Width="500"
    MinWidth="{DynamicResource WolvenKitDialogWidthSmall}"
    MaxWidth="800"
    SizeToContent="Height"
    ResizeMode="NoResize"
    FocusManager.FocusedElement="{Binding ElementName=PrimaryInputTextBox}"
    WindowStartupLocation="CenterScreen">
    <Grid
        HorizontalAlignment="Stretch"
        VerticalAlignment="Stretch"
        hc:ThemeManager.RequestedAccentColor="{DynamicResource MahApps.Brushes.Accent3}">
        <Grid.Resources>
            <ResourceDictionary>
                <ResourceDictionary.MergedDictionaries>
                    <hc:ThemeResources />
                    <hc:Theme />
                </ResourceDictionary.MergedDictionaries>
                <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
            </ResourceDictionary>
        </Grid.Resources>

        <syncfusion:WizardControl
            CancelButtonCancelsWindow="True"
            FinishButtonClosesWindow="True">
            <syncfusion:WizardPage
                BackVisibility="Collapsed"
                CancelVisibility="Visible"
                FinishVisibility="Visible"
                HelpVisibility="Collapsed"
                NextVisibility="Collapsed"
                PageType="Exterior">
                <Grid Margin="{DynamicResource WolvenKitMarginSmallHeader}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>

                    <!-- Dropdown Field (conditionally visible) -->
                    <Grid
                        Grid.Row="0"
                        Grid.Column="0"
                        Margin="{DynamicResource WolvenKitMarginSmallBottom}"
                        Visibility="{Binding ShowDropdown,
                                             Converter={StaticResource BooleanToVisibilityConverter}}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" MinWidth="{DynamicResource WolvenKitLabelWidthMedium}" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <TextBlock
                            Grid.Column="0"
                            Margin="{DynamicResource WolvenKitMarginSmallRight}"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Foreground="{DynamicResource PrimaryTextBrush}"
                            FontSize="{DynamicResource WolvenKitFontSubTitle}"
                            Text="{Binding DropdownLabel}" />

                        <ComboBox
                            Grid.Column="1"
                            Padding="{DynamicResource WolvenKitMarginTiny}"
                            FontSize="{DynamicResource WolvenKitFontSubTitle}"
                            ItemsSource="{Binding DropdownOptions}"
                            SelectedItem="{Binding SelectedDropdownValue,
                                                   UpdateSourceTrigger=PropertyChanged}"
                            IsReadOnly="True" />
                    </Grid>

                    <!-- Primary Input Field (always visible) -->
                    <Grid
                        Grid.Row="1"
                        Grid.Column="0"
                        Margin="{DynamicResource WolvenKitMarginSmallBottom}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" MinWidth="{DynamicResource WolvenKitLabelWidthMedium}" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <TextBlock
                            Grid.Column="0"
                            Margin="{DynamicResource WolvenKitMarginTinyRightSide}"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Top"
                            Foreground="{DynamicResource PrimaryTextBrush}"
                            FontSize="{DynamicResource WolvenKitFontSubTitle}"
                            Text="{Binding PrimaryLabel}" />

                        <TextBox
                            x:Name="PrimaryInputTextBox"
                            Grid.Column="1"
                            Padding="{DynamicResource WolvenKitMarginTiny}"
                            FontSize="{DynamicResource WolvenKitFontSubTitle}"
                            Text="{Binding PrimaryInputValue,
                                           UpdateSourceTrigger=PropertyChanged}"
                            TextWrapping="Wrap"
                            AcceptsReturn="False"
                            VerticalScrollBarVisibility="Auto" />
                    </Grid>

                    <!-- Secondary Input Checkbox (conditionally visible) -->
                    <Grid
                        Grid.Row="2"
                        Grid.Column="0"
                        Margin="{DynamicResource WolvenKitMarginSmallBottom}"
                        VerticalAlignment="Top"
                        Visibility="{Binding ShowSecondaryInput,
                                             Converter={StaticResource BooleanToVisibilityConverter}}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" MinWidth="{DynamicResource WolvenKitLabelWidthMedium}" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <CheckBox
                            Grid.Column="1"
                            FontSize="{DynamicResource WolvenKitFontSubTitle}"
                            Content="{Binding CheckboxText}"
                            IsChecked="{Binding EnableSecondaryInput}" />
                    </Grid>

                    <!-- Secondary Input Field (conditionally visible) -->
                    <Grid
                        Grid.Row="3"
                        Grid.Column="0"
                        Margin="{DynamicResource WolvenKitMarginSmallBottom}"
                        Visibility="{Binding EnableSecondaryInput,
                                             Converter={StaticResource BooleanToVisibilityConverter}}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" MinWidth="{DynamicResource WolvenKitLabelWidthMedium}" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <TextBlock
                            Grid.Column="0"
                            Margin="{DynamicResource WolvenKitMarginTinyRightSide}"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Top"
                            Foreground="{DynamicResource PrimaryTextBrush}"
                            FontSize="{DynamicResource WolvenKitFontSubTitle}"
                            Text="{Binding SecondaryLabel}" />

                        <TextBox
                            Grid.Column="1"
                            Padding="{DynamicResource WolvenKitMarginTiny}"
                            FontSize="{DynamicResource WolvenKitFontSubTitle}"
                            Text="{Binding SecondaryInputValue,
                                           UpdateSourceTrigger=PropertyChanged}"
                            TextWrapping="Wrap"
                            AcceptsReturn="True"
                            VerticalScrollBarVisibility="Auto" />
                    </Grid>
                </Grid>
            </syncfusion:WizardPage>
        </syncfusion:WizardControl>
    </Grid>
</Window>
